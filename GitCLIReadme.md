这份 **GitCLI v3.1 使用操作手册** 旨在帮助你和团队成员快速掌握这个基于 Shell + FZF 的高效 Git 辅助工具。

---

# 📘 GitCLI v3.1 极速开发助手 - 操作手册

## 1. 工具简介

GitCLI 是一个专为开发者打造的终端交互式 Git 工具。它利用 `fzf` 提供了极速的模糊搜索体验，集成了 **DeepSeek AI** 自动生成提交信息、**实时变更审计**以及独家的 **远程文件注射 (Inject)** 功能，旨在将繁琐的 Git 命令转化为顺滑的“选择-确认”流。

---

## 2. 安装与配置

### 前置依赖

确保你的终端环境安装了以下工具：

* **Git** (核心依赖)
* **FZF** (核心交互组件，必须安装)
* **jq** (用于解析 AI 接口返回的 JSON)
* **curl** (用于请求 AI 接口)

### 安装步骤

1. 将脚本保存为 `git-cli`（去掉 .sh 后缀）。
2. 赋予执行权限：
```bash
chmod +x git-cli

```


3. 移动到系统路径（可选，建议）：
```bash
sudo mv git-cli /usr/local/bin/

```



### 🔑 关键配置 (启用 AI 功能)

为了使用“智能提交”功能，你需要设置 DeepSeek 的 API Key。建议添加到你的 shell 配置文件（如 `~/.zshrc` or `~/.bashrc`）：

```bash
export DEEPSEEK_API_KEY="sk-your-api-key-here"

```

---

## 3. 主界面概览

运行 `git-cli` 后，你将看到如下仪表盘：

* **顶部信息栏**：
* 🌿 **分支**：当前所在分支及与远程的同步状态（↑超前 / ↓落后）。
* 📊 **状态**：实时统计新增、修改、删除及未跟踪文件的数量。


* **功能菜单**：分为核心开发、浏览审计、高级工具、系统四大板块。

---

## 4. 核心功能详解

### 🔄 刷新状态 (Refresh)

* **作用**：重新扫描工作区状态和 Git 索引。
* **场景**：当你手动修改了文件或在其他终端执行了 Git 命令后，使用此项刷新 UI。

### 🚀 核心开发流

#### 1. 智能提交 & 推送 (Smart Commit)

这是最常用的功能。流程如下：

1. **选择文件**：按 `Tab` 键多选文件，支持搜索。
* *特性*：自动处理中文文件名，自动展开未跟踪文件夹。


2. **生成 Message**：
* ✨ **AI 生成**：调用 DeepSeek 根据 `git diff` 自动生成符合 Conventional Commits 规范的总结。
* 📝 **手动输入**：传统方式输入。


3. **自动推送**：提交成功后，脚本会询问是否推送。
* *极速模式*：默认选项为 Yes，**直接按回车**即可推送到远程。



#### 2. 拉取代码 (Pull)

* 执行标准的 `git pull`，同步远程代码。

#### 3. 推送选项 (Push Options)

提供三种推送模式：

* **普通推送**：标准的 `git push`。
* **备份推送**：自动将当前 HEAD 推送到一个新的远程分支（命名格式：`backup/原分支名/时间戳`）。*适合实验性修改前的备份。*
* **强制推送**：带 `force-with-lease` 的安全强推，支持推送到当前分支或其他指定分支。

---

### 👁️ 浏览与审计

#### 1. 实时变更对比 (Live Diff)

* **作用**：类似 IDE 的变更列表，但更轻量。
* **交互**：
* **[NEW]** (绿色)：新增文件，右侧预览完整内容。
* **[MOD]** (蓝色)：修改文件，右侧预览 Diff 差异。
* **[DEL]** (红色)：已删除文件，右侧预览删除前的内容。
* **编辑**：选中任意文件按 **Enter**，立即调用默认编辑器（如 vim）打开。



#### 2. 文件审计 (Explorer)

* **作用**：浏览项目目录结构。
* **特性**：
* 进入文件夹：查看内部文件。
* 选中文件：查看该文件的**完整 Git 变更历史 (Log)**。
* 预览：右侧窗口实时显示文件内容。



---

### 💉 高级黑科技工具 (Advanced)

#### 1. 远程文件注射 (Inject to Remote) 🔥

**这是本工具最强大的功能。**

* **场景**：你修复了一个 Bug，需要同步给远程的 `release` 分支，但你不想切换分支，也不想拉取那个庞大的分支到本地。
* **操作流程**：
1. 选择目标远程分支（例如 `origin/production`）。
2. **筛选文件**：列表仅显示**当前有差异**或**新增**的文件（带颜色分组）。按 `Tab` 勾选要注入的文件。
3. **自动执行**：
* 脚本自动 Stash 你当前的工作。
* 在后台基于远程分支建立临时环境。
* 将你选中的文件“空降”覆盖过去。
* 自动提交并 Push。
* 恢复你原来的工作区。




* **结果**：远程分支更新了指定文件，而你的本地工作区毫发无损，仿佛什么都没发生。

#### 2. 本地定向同步 (Sync Files)

* **场景**：要把 `dev` 分支的 `config.yaml` 拿过来覆盖当前的配置。
* **操作**：选择源分支 -> 选择文件 -> 选择策略（🔥覆盖 / 🧬合并）。

---

## 5. 快捷键指南 (FZF 通用)

| 按键 | 作用 |
| --- | --- |
| **Ctrl + N** / **↓** | 向下移动光标 |
| **Ctrl + P** / **↑** | 向上移动光标 |
| **Tab** | **多选/取消选择** (在文件选择列表时非常重要) |
| **Enter** | 确认 / 执行 / 进入目录 |
| **Esc** | 返回上一级 / 取消 / 退出 |

---

## 6. 常见问题 (FAQ)

**Q1: 智能提交时提示 "AI 生成失败"？**

* 检查 `DEEPSEEK_API_KEY` 环境变量是否已正确设置。
* 确保安装了 `jq` 工具。
* 检查暂存区（Staged）是否有内容，如果 Diff 为空，AI 无法生成。

**Q2: 在 Live Diff 里文件名显示不全（例如 GitCLI.sh 显示为 itCLI.sh）？**

* 这是旧版本的问题，请确保使用的是 v3.1 版本（修复了 `read` 命令吞噬空格的 Bug）。

**Q3: 为什么“远程文件注射”列表里找不到我刚删的文件？**

* 为了安全起见，注射功能目前只支持**修改 (Modified)** 和 **新增 (New)** 的文件注入。文件删除操作建议通过常规 Git 流程处理，防止误操作导致远程丢失数据。

**Q4: 图标对齐看起来有点歪？**

* 这取决于你使用的终端字体（推荐使用 Nerd Fonts）。v3.1 版本已经针对普通字体对 Emoji 宽度进行了强制空格补齐，大部分终端下应显示正常。