{
    "swagger": "2.0",
    "info": {
        "description": "基于Hyperledger Fabric的汽配供应链溯源管理系统，支持主机厂、零部件厂商、承运商多角色协同",
        "title": "汽配供应链管理系统 API",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "技术支持",
            "url": "http://example.com/support",
            "email": "support@example.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api",
    "paths": {
        "/carrier/order/list": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "支持分页查询订单列表，使用bookmark实现翻页",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "OEM",
                    "Manufacturer",
                    "Carrier",
                    "Platform"
                ],
                "summary": "分页查询订单列表",
                "parameters": [
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "default": 10,
                        "description": "每页数量",
                        "name": "pageSize",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "分页书签（上次查询返回的bookmark）",
                        "name": "bookmark",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "查询成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/api.OrderListResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/carrier/shipment/pickup": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "承运商从制造商处取货，创建物流跟踪单",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Carrier"
                ],
                "summary": "取货并生成物流单",
                "parameters": [
                    {
                        "description": "取货信息",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.PickupGoodsRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "取货成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/carrier/shipment/{id}": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "根据物流单ID查询物流跟踪信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Carrier"
                ],
                "summary": "查询物流详情",
                "parameters": [
                    {
                        "type": "string",
                        "example": "SHIP001",
                        "description": "物流单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "查询成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/api.Shipment"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/carrier/shipment/{id}/location": {
            "put": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "承运商上报货物当前位置信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Carrier"
                ],
                "summary": "更新物流位置",
                "parameters": [
                    {
                        "type": "string",
                        "example": "SHIP001",
                        "description": "物流单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "位置信息",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.UpdateLocationRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "位置更新成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/manufacturer/order/list": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "支持分页查询订单列表，使用bookmark实现翻页",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "OEM",
                    "Manufacturer",
                    "Carrier",
                    "Platform"
                ],
                "summary": "分页查询订单列表",
                "parameters": [
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "default": 10,
                        "description": "每页数量",
                        "name": "pageSize",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "分页书签（上次查询返回的bookmark）",
                        "name": "bookmark",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "查询成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/api.OrderListResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/manufacturer/order/{id}/accept": {
            "put": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "零部件厂商接受主机厂发布的订单",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Manufacturer"
                ],
                "summary": "接受订单",
                "parameters": [
                    {
                        "type": "string",
                        "example": "ORDER001",
                        "description": "订单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "订单接受成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/manufacturer/order/{id}/status": {
            "put": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "零部件厂商更新订单的生产进度状态",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Manufacturer"
                ],
                "summary": "更新生产状态",
                "parameters": [
                    {
                        "type": "string",
                        "example": "ORDER001",
                        "description": "订单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "状态信息",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.UpdateStatusRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "状态更新成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/oem/order/create": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "主机厂(OEM)发布零部件采购订单到指定制造商",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "OEM"
                ],
                "summary": "创建订单",
                "parameters": [
                    {
                        "description": "订单信息",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.CreateOrderRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "订单创建成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/oem/order/list": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "支持分页查询订单列表，使用bookmark实现翻页",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "OEM",
                    "Manufacturer",
                    "Carrier",
                    "Platform"
                ],
                "summary": "分页查询订单列表",
                "parameters": [
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "default": 10,
                        "description": "每页数量",
                        "name": "pageSize",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "分页书签（上次查询返回的bookmark）",
                        "name": "bookmark",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "查询成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/api.OrderListResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/oem/order/{id}": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "根据订单ID查询订单的完整信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "OEM"
                ],
                "summary": "查询订单详情",
                "parameters": [
                    {
                        "type": "string",
                        "example": "ORDER001",
                        "description": "订单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "查询成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/api.Order"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/oem/order/{id}/receive": {
            "put": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "主机厂确认收到货物，订单完成",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "OEM"
                ],
                "summary": "确认收货",
                "parameters": [
                    {
                        "type": "string",
                        "example": "ORDER001",
                        "description": "订单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "签收成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        },
        "/platform/order/list": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "支持分页查询订单列表，使用bookmark实现翻页",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "OEM",
                    "Manufacturer",
                    "Carrier",
                    "Platform"
                ],
                "summary": "分页查询订单列表",
                "parameters": [
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "default": 10,
                        "description": "每页数量",
                        "name": "pageSize",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "分页书签（上次查询返回的bookmark）",
                        "name": "bookmark",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "查询成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/utils.Response"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/api.OrderListResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "$ref": "#/definitions/utils.Response"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "api.CreateOrderRequest": {
            "type": "object",
            "required": [
                "id",
                "items",
                "manufacturerId"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "minLength": 1,
                    "example": "ORDER001"
                },
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.OrderItem"
                    }
                },
                "manufacturerId": {
                    "type": "string",
                    "example": "MFG001"
                }
            }
        },
        "api.Order": {
            "type": "object",
            "properties": {
                "acceptedAt": {
                    "type": "string"
                },
                "createdAt": {
                    "type": "string",
                    "example": "2024-01-01T00:00:00Z"
                },
                "deliveredAt": {
                    "type": "string"
                },
                "id": {
                    "type": "string",
                    "example": "ORDER001"
                },
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.OrderItem"
                    }
                },
                "manufacturerId": {
                    "type": "string",
                    "example": "MFG001"
                },
                "oemId": {
                    "type": "string",
                    "example": "OEM001"
                },
                "producedAt": {
                    "type": "string"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "Created",
                        "Accepted",
                        "InProduction",
                        "Produced",
                        "PickedUp",
                        "InTransit",
                        "Delivered"
                    ],
                    "example": "Created"
                },
                "updatedAt": {
                    "type": "string",
                    "example": "2024-01-02T10:30:00Z"
                }
            }
        },
        "api.OrderItem": {
            "type": "object",
            "properties": {
                "partName": {
                    "type": "string",
                    "example": "发动机缸体"
                },
                "partNumber": {
                    "type": "string",
                    "example": "PART-12345"
                },
                "quantity": {
                    "type": "integer",
                    "minimum": 1,
                    "example": 100
                },
                "specification": {
                    "type": "string",
                    "example": "标准规格"
                },
                "unitPrice": {
                    "type": "number",
                    "minimum": 0,
                    "example": 125.5
                }
            }
        },
        "api.OrderListResponse": {
            "type": "object",
            "properties": {
                "bookmark": {
                    "type": "string",
                    "example": "g1AAAAG..."
                },
                "orders": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.Order"
                    }
                }
            }
        },
        "api.PickupGoodsRequest": {
            "type": "object",
            "required": [
                "orderId",
                "shipmentId"
            ],
            "properties": {
                "orderId": {
                    "type": "string",
                    "example": "ORDER001"
                },
                "shipmentId": {
                    "type": "string",
                    "example": "SHIP001"
                }
            }
        },
        "api.Shipment": {
            "type": "object",
            "properties": {
                "carrierId": {
                    "type": "string",
                    "example": "CARRIER001"
                },
                "id": {
                    "type": "string",
                    "example": "SHIP001"
                },
                "locations": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.ShipmentLocation"
                    }
                },
                "orderId": {
                    "type": "string",
                    "example": "ORDER001"
                },
                "pickupAt": {
                    "type": "string",
                    "example": "2024-01-03T08:00:00Z"
                },
                "status": {
                    "type": "string",
                    "example": "InTransit"
                },
                "updatedAt": {
                    "type": "string",
                    "example": "2024-01-03T12:00:00Z"
                }
            }
        },
        "api.ShipmentLocation": {
            "type": "object",
            "properties": {
                "location": {
                    "type": "string",
                    "example": "北京市朝阳区"
                },
                "timestamp": {
                    "type": "string",
                    "example": "2024-01-03T12:00:00Z"
                }
            }
        },
        "api.UpdateLocationRequest": {
            "type": "object",
            "required": [
                "location"
            ],
            "properties": {
                "location": {
                    "type": "string",
                    "example": "北京市朝阳区"
                }
            }
        },
        "api.UpdateStatusRequest": {
            "type": "object",
            "required": [
                "status"
            ],
            "properties": {
                "status": {
                    "type": "string",
                    "enum": [
                        "InProduction",
                        "Produced"
                    ],
                    "example": "InProduction"
                }
            }
        },
        "utils.Response": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer"
                },
                "data": {},
                "message": {
                    "type": "string"
                }
            }
        }
    },
    "securityDefinitions": {
        "ApiKeyAuth": {
            "description": "组织身份标识 (可选值: org1-OEM, org2-Manufacturer, org3-Carrier/Platform)",
            "type": "apiKey",
            "name": "X-Org-ID",
            "in": "header"
        }
    },
    "tags": [
        {
            "description": "主机厂相关接口 - 创建订单、确认收货、查询订单",
            "name": "OEM"
        },
        {
            "description": "零部件厂商接口 - 接受订单、更新生产状态",
            "name": "Manufacturer"
        },
        {
            "description": "承运商接口 - 取货、更新物流位置、查询物流信息",
            "name": "Carrier"
        },
        {
            "description": "平台监管接口 - 全局订单查询",
            "name": "Platform"
        }
    ]
}