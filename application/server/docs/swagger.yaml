basePath: /api
definitions:
  api.CreateOrderRequest:
    type: object
  api.PickupGoodsRequest:
    properties:
      orderId:
        description: 订单ID
        example: ORDER_2024_001
        type: string
      shipmentId:
        description: 物流单ID
        example: SHIPMENT_2024_001
        type: string
    required:
    - orderId
    - shipmentId
    type: object
  api.UpdateLocationRequest:
    properties:
      location:
        description: 当前位置
        example: SHANGHAI_PORT
        type: string
    required:
    - location
    type: object
  api.UpdateStatusRequest:
    properties:
      status:
        description: 生产状态：PRODUCING(生产中)/PRODUCED(已生产)/READY(待发货)
        enum:
        - PRODUCING
        - PRODUCED
        - READY
        example: PRODUCING
        type: string
    required:
    - status
    type: object
  utils.Response:
    properties:
      code:
        type: integer
      data: {}
      message:
        type: string
    type: object
host: 192.168.1.41:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: |-
    基于 Hyperledger Fabric 的汽配供应链协同系统 API 文档
    本系统提供完整的供应链协同管理功能，包括订单管理、物流追踪、状态更新等
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: 供应链协同系统 API 文档
  version: "1.0"
paths:
  /carrier/shipment/{id}:
    get:
      consumes:
      - application/json
      description: 查询物流单的详细信息
      parameters:
      - description: 物流单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 查询物流详情
      tags:
      - Carrier
  /carrier/shipment/{id}/history:
    get:
      consumes:
      - application/json
      description: 查询物流单的完整位置变更历史
      parameters:
      - description: 物流单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 查询物流单历史记录
      tags:
      - Carrier
  /carrier/shipment/{id}/location:
    put:
      consumes:
      - application/json
      description: Carrier 更新物流单的位置信息
      parameters:
      - description: 物流单ID
        in: path
        name: id
        required: true
        type: string
      - description: 位置信息
        in: body
        name: location
        required: true
        schema:
          $ref: '#/definitions/api.UpdateLocationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 更新物流位置
      tags:
      - Carrier
  /carrier/shipment/pickup:
    post:
      consumes:
      - application/json
      description: Carrier 取货并生成物流单，订单状态变为 READY
      parameters:
      - description: 取货信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/api.PickupGoodsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 承运商取货
      tags:
      - Carrier
  /manufacturer/order/{id}/accept:
    put:
      consumes:
      - application/json
      description: Manufacturer 接受 OEM 创建的订单，状态变为 ACCEPTED
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 零部件厂商接受订单
      tags:
      - Manufacturer
  /manufacturer/order/{id}/status:
    put:
      consumes:
      - application/json
      description: Manufacturer 更新订单的生产状态 (PRODUCING/PRODUCED/READY)
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      - description: 新状态
        in: body
        name: status
        required: true
        schema:
          $ref: '#/definitions/api.UpdateStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 更新生产状态
      tags:
      - Manufacturer
  /oem/order/{id}:
    get:
      consumes:
      - application/json
      description: 根据订单ID查询订单详细信息
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 查询订单详情
      tags:
      - OEM
  /oem/order/{id}/history:
    get:
      consumes:
      - application/json
      description: 查询订单的完整状态变更历史，展示区块链不可篡改的审计追踪
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 查询订单历史记录
      tags:
      - OEM
  /oem/order/{id}/receive:
    put:
      consumes:
      - application/json
      description: OEM 确认收货，订单状态变为 RECEIVED
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: OEM 确认收货
      tags:
      - OEM
  /oem/order/create:
    post:
      consumes:
      - application/json
      description: OEM 创建新的采购订单，订单状态为 CREATED
      parameters:
      - description: 订单信息
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/api.CreateOrderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 订单创建成功
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  type: string
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 主机厂创建采购订单
      tags:
      - OEM
  /oem/order/list:
    get:
      consumes:
      - application/json
      description: 分页查询订单列表，支持根据角色过滤
      parameters:
      - default: 10
        description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 分页书签
        in: query
        name: bookmark
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 查询订单列表
      tags:
      - OEM
  /platform/all:
    get:
      consumes:
      - application/json
      description: 查询账本上所有资产（订单和物流单）的当前状态及其完整的历史变更记录，用于审计和追溯
      parameters:
      - default: 10
        description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 分页书签
        in: query
        name: bookmark
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 查询所有账本数据及完整历史变更记录
      tags:
      - Platform
produces:
- application/json
schemes:
- http
- https
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
tags:
- description: 主机厂相关接口 - 订单创建、查询、签收等操作
  name: OEM
- description: 零部件厂商相关接口 - 订单接受、状态更新等操作
  name: Manufacturer
- description: 承运商相关接口 - 取货、物流追踪、位置更新等操作
  name: Carrier
- description: 平台方相关接口 - 数据监管、审计追溯等操作
  name: Platform
